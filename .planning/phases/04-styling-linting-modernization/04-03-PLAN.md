---
phase: 04-styling-linting-modernization
plan: 03
type: execute
wave: 2
depends_on: ["04-01", "04-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All 4 locale pages render with visually identical styles in production build"
    - "All seasonal themes display correctly (verified via data-season attribute override)"
    - "Dark mode toggle works across all themes"
    - "Custom scrollbar styles apply on main page"
    - "ESLint passes for all project file types"
    - "Production build includes all Tailwind classes (no silent disappearances)"
  artifacts: []
  key_links:
    - from: "production build CSS"
      to: "all template classes"
      via: "Tailwind content scanning"
      pattern: "shadow-|bg-background|text-primary|scrollbar"
---

<objective>
Verify the complete Tailwind 4 and ESLint 10 migration with production build testing, visual regression checks across seasonal themes, and linting validation.

Purpose: Catch any silent class disappearances, theme rendering issues, or linting gaps that could slip through individual plan testing.

Output: Verified production build with all requirements confirmed.
</objective>

<execution_context>
@/Users/mini/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mini/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-styling-linting-modernization/04-01-SUMMARY.md
@.planning/phases/04-styling-linting-modernization/04-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Production build and automated verification</name>
  <files></files>
  <action>
  Run comprehensive automated checks to verify the full migration:

  1. Clean build: `rm -rf dist && pnpm build`
     - Must complete with zero errors
     - Check build output for any Tailwind-related warnings

  2. Verify production CSS contains critical classes. Inspect the built CSS file(s) in `dist/`:
     - Search for `bg-background` equivalent styles (the compiled CSS, not class names)
     - Search for `shadow-lg` or equivalent compiled shadow styles
     - Search for scrollbar styling rules (`scrollbar-track`, `scrollbar-thumb` or equivalent)
     - Search for seasonal color values (e.g., `210 100% 97%` for winter background)
     - Verify animation keyframes exist (accordion-down, fade-down)

  3. Verify all 4 locale pages generated:
     - `dist/index.html` (es - default)
     - `dist/en/index.html`
     - `dist/pt/index.html`
     - `dist/gl/index.html`

  4. Run ESLint on full project: `npx eslint src/`
     - Must run without configuration errors
     - Document any linting warnings/errors (existing code issues are acceptable)

  5. Run type checking: `pnpm astro check`
     - Must pass with zero errors (warnings acceptable)

  6. Search all template files for any remaining v3 syntax that the upgrade tool might have missed:
     - No `shadow-sm` that should be `shadow-xs` (grep src/ for `shadow-sm` -- this is a common miss)
     - No `!flex` or `!hidden` pattern (should be `flex!` or `hidden!`)
     - No `bg-[--var]` pattern (should be `bg-(--var)`)
     - No `@tailwind` directives remaining in any CSS file

  7. Verify the seasonal theme script is present in the built HTML:
     - Check `dist/index.html` for the inline script that sets `data-season`
     - Verify the season detection logic is present
  </action>
  <verify>
  - `pnpm build` exits with code 0
  - All 4 locale HTML files exist in dist/
  - `npx eslint src/` runs without config errors
  - `pnpm astro check` passes
  - No remaining v3 syntax patterns found
  - Seasonal theme script present in built HTML
  </verify>
  <done>Production build passes, all locale pages generated, ESLint runs correctly, type checking passes, no v3 Tailwind syntax remnants</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Visual verification of Tailwind 4 migration across themes and locales</name>
  <files></files>
  <action>
  Present the dev server to the user for visual verification of the complete Tailwind CSS 4 + ESLint 10 migration. Start dev server if not running: `pnpm dev`. Then pause for user verification.
  </action>
  <verify>
  User confirms visual parity with pre-migration state by typing "approved".
  </verify>
  <done>User has visually verified all seasonal themes, dark mode, component styling, and locale rendering match pre-migration appearance.</done>
  <what-built>Complete Tailwind CSS 4 + ESLint 10 migration including seasonal theming, dark mode, scrollbar styling, animations, and linting for all file types</what-built>
  <how-to-verify>
  1. Start dev server: `pnpm dev` (should already be running)
  2. Visit http://localhost:4321 (Spanish/default locale)

  **Visual check - Current theme (winter):**
  - Page background should be light blue-ish (winter theme: hsl(210 100% 97%))
  - H2 headings (like "Proyectos") should be medium blue
  - Links/buttons should have red accent color
  - Overall look should be IDENTICAL to before migration

  **Dark mode check:**
  - Click the theme toggle dropdown in the header
  - Select dark mode
  - Background should switch to dark blue (hsl(210 20% 20%))
  - Text should become light
  - Toggle back to light mode

  **Seasonal theme override check (optional, to verify other seasons work):**
  - Open browser DevTools console
  - Run: `document.documentElement.setAttribute('data-season', 'spring')`
  - Colors should change to spring palette (green bg, pink headings)
  - Run: `document.documentElement.setAttribute('data-season', 'summer')`
  - Colors should change to summer palette (yellow bg, orange headings)
  - Run: `document.documentElement.setAttribute('data-season', 'autumn')`
  - Colors should change to autumn palette (beige bg, orange headings)
  - Run: `document.documentElement.removeAttribute('data-season')`
  - Should return to default/winter theme

  **Component checks:**
  - Header shadow visible on scroll
  - Language switcher dropdown animates on hover (fade-down)
  - Mode toggle dropdown animates on hover (fade-down)
  - Scrollbar has custom styling (visible on right side of main page)
  - Projects section: cards have rounded corners and shadows
  - Contact form: white background with shadow

  **Locale check:**
  - Navigate to /en/ - English version renders correctly
  - Navigate to /pt/ - Portuguese version renders correctly
  - Navigate to /gl/ - Galician version renders correctly
  - All pages have same styling as Spanish default

  3. If any visual discrepancies found, describe what looks different.
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any visual issues found</resume-signal>
</task>

</tasks>

<verification>
- Production build succeeds with zero errors
- All 4 locale pages render with correct styles
- All seasonal themes display correctly when overridden via data-season
- Dark mode works across all themes
- Scrollbar styling applies
- All animations work (fade-down, accordion)
- ESLint runs on all file types
- Type checking passes
- User confirms visual parity with pre-migration state
</verification>

<success_criteria>
1. All pages render with visually identical styles in production build (SC-1)
2. All seasonal themes display correctly (SC-2)
3. Dark mode toggle works correctly across all themes (SC-3)
4. Custom scrollbar styles apply correctly (SC-4)
5. ESLint passes for all file types (SC-5)
6. Production build includes all Tailwind classes (SC-6)
</success_criteria>

<output>
After completion, create `.planning/phases/04-styling-linting-modernization/04-03-SUMMARY.md`
</output>
