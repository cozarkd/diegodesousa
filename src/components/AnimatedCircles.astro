<style>
	.o-noise {
		pointer-events: none;
		animation: noise 1s steps(2) infinite;
		position: fixed;
		inset: 0;
		z-index: 901;
		background-image: url('/noise.png');
		background-position: 0px 0px;
		background-size: 100px;
	}
	@keyframes noise {
		0%,
		100% {
			background-position: 0 0;
		}
		10% {
			background-position: -5% -10%;
		}
		20% {
			background-position: -15% 5%;
		}
		30% {
			background-position: 7% -25%;
		}
		40% {
			background-position: 20% 25%;
		}
		50% {
			background-position: -25% 10%;
		}
		60% {
			background-position: 15% 5%;
		}
		70% {
			background-position: 0% 15%;
		}
		80% {
			background-position: 25% 35%;
		}
		90% {
			background-position: -10% 10%;
		}
	}
</style>

<!-- <div class="o-noise"></div> -->
<div class='fixed inset-0 overflow-hidden pointer-events-none'>
	<svg
		id='circle-big'
		class='absolute opacity-30 -bottom-48 -left-48'
		width='600'
		height='600'
		xmlns='http://www.w3.org/2000/svg'
	>
		<defs>
			<radialGradient id='gradienteRadial'>
				<stop offset='0%' style='stop-color: var(--color-primary);'></stop>
				<stop offset='100%' style='stop-color: transparent;'></stop>
			</radialGradient>
		</defs>
		<circle cx='300' cy='300' r='290' fill='url(#gradienteRadial)'></circle>
	</svg>

	<svg
	id='circle-medium'
	class='absolute opacity-30 -top-1/2 -right-1/2'
	width='1200'
	height='1200'
	xmlns='http://www.w3.org/2000/svg'
>
		<defs>
			<radialGradient id='gradienteRadial2'>
				<stop offset='0%' style='stop-color: var(--color-secondary);'></stop>
				<stop offset='100%' style='stop-color: transparent;'></stop>
			</radialGradient>
		</defs>
		<circle cx='600' cy='600' r='580' fill='url(#gradienteRadial2)'></circle>
	</svg>

	<svg
	id='circle-small'
	class='absolute opacity-30 -top-1/4 right-1/3'
	width='400'
	height='400'
	xmlns='http://www.w3.org/2000/svg'
>
		<defs>
			<radialGradient id='gradienteRadial3'>
				<stop offset='0%' style='stop-color: var(--color-accent);'></stop>
				<stop offset='100%' style='stop-color: transparent;'></stop>
			</radialGradient>
		</defs>
		<circle cx='200' cy='200' r='180' fill='url(#gradienteRadial3)'></circle>
	</svg>

</div>
<script>
	import { gsap } from 'gsap'

	import { ScrollTrigger } from 'gsap/ScrollTrigger'
	// import { ScrollToPlugin } from 'gsap/ScrollToPlugin'

	gsap.registerPlugin(ScrollTrigger)

	// Asegúrate de que el DOM esté completamente cargado antes de ejecutar las animaciones
	document.addEventListener('DOMContentLoaded', function () {
		// Animación de escala y opacidad para el círculo SVG
		gsap.from('#circle-big', {
			scale: 0,
			opacity: 0,
			x: '-50%',
			y: '50%',
			transformOrigin: '0 100%',
			duration: 3.5,
			ease: 'power2.out',
			onComplete: function () {
				// Iniciar el efecto de respiración una vez que la animación inicial esté completa
				gsap.to('#circle-big', {
					scale: 1.1, // Ligeramente más grande para el efecto de "respiración"
					duration: 4,
					// transformOrigin: '0 100%',

					yoyo: true,
					repeat: -1, // Repetir infinitamente
					ease: 'sine.inOut'
				})
			}
		})
		gsap.from('#circle-medium', {
			scale: 0,
			opacity: 0,
			x: '50%',
			y: '-50%',
			transformOrigin: '0% 50%',
			duration: 4,
			delay: 0.7,
			ease: 'power2.out',
			onComplete: function () {
				// Iniciar el efecto de respiración una vez que la animación inicial esté completa
				gsap.to('#circle-medium', {
					scale: 1.1, // Ligeramente más grande para el efecto de "respiración"
					duration: 3,
					// transformOrigin: '0 100%',

					yoyo: true,
					repeat: -1, // Repetir infinitamente
					ease: 'sine.inOut'
				})
			}
		})

		gsap.from('#circle-small', {
			scale: 0,
			opacity: 0,
			x: '50%',
			y: '-50%',
			transformOrigin: '100% 0%',
			duration: 5,
			delay: 0.5,
			ease: 'power2.out',
			onComplete: function () {
				// Iniciar el efecto de respiración una vez que la animación inicial esté completa
				gsap.to('#circle-small', {
					scale: 1.2, // Ligeramente más grande para el efecto de "respiración"
					duration: 6,
					// transformOrigin: '0 100%',

					yoyo: true,
					repeat: -1, // Repetir infinitamente
					ease: 'sine.inOut'
				})
			}
		})

		// Animación que responde al scroll
		ScrollTrigger.create({
			trigger: '#projects', // La sección que desencadena la animación
			start: 'top center', // Inicia cuando la sección llega al centro de la pantalla
			end: 'bottom center',
			onEnter: () => {
				gsap.to('#circle-big', {
					x: 100, // Nueva posición en el eje X
					y: 50, // Nueva posición en el eje Y
					duration: 1.5,
					ease: 'power1.inOut'
				})
			},
			onLeaveBack: () => {
				gsap.to('#circle-big', {
					x: 0, // Vuelve a la posición original en el eje X
					y: 0, // Vuelve a la posición original en el eje Y
					duration: 1.5,
					ease: 'power1.inOut'
				})
			},
			markers: true // Útil para depuración, elimina en producción
		})

		ScrollTrigger.create({
			trigger: '#projects', // La sección que desencadena la animación
			start: 'top center', // Inicia cuando la sección llega al centro de la pantalla
			end: 'bottom center',
			onEnter: () => {
				gsap.to('#circle-medium', {
					x: 100, // Nueva posición en el eje X
					y: 50, // Nueva posición en el eje Y
					duration: 1.5,
					ease: 'power1.inOut'
				})
			},
			onLeaveBack: () => {
				gsap.to('#circle-medium', {
					x: 0, // Vuelve a la posición original en el eje X
					y: 0, // Vuelve a la posición original en el eje Y
					duration: 1.5,
					ease: 'power1.inOut'
				})
			},
			markers: true // Útil para depuración, elimina en producción
		})

		ScrollTrigger.create({
			trigger: '#projects', // La sección que desencadena la animación
			start: 'top center', // Inicia cuando la sección llega al centro de la pantalla
			end: 'bottom center',
			onEnter: () => {
				gsap.to('#circle-small', {
					x: 100, // Nueva posición en el eje X
					y: 50, // Nueva posición en el eje Y
					duration: 1.5,
					ease: 'power1.inOut'
				})
			},
			onLeaveBack: () => {
				gsap.to('#circle-small', {
					x: 0, // Vuelve a la posición original en el eje X
					y: 0, // Vuelve a la posición original en el eje Y
					duration: 1.5,
					ease: 'power1.inOut'
				})
			},
			markers: true // Útil para depuración, elimina en producción
		})
	})
</script>
